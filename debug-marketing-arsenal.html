<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Marketing Arsenal Images</title>
    <style>
        body {
            font-family: 'Orbitron', monospace;
            background: #0a0a0a;
            color: #10b981;
            padding: 20px;
            margin: 0;
        }
        .debug-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .section {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #10b981;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .image-test {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .image-item {
            text-align: center;
            padding: 10px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 8px;
        }
        .image-item img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .log {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .success { color: #22c55e; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        .info { color: #3b82f6; }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1>üîç Debug - Marketing Arsenal Images</h1>
        
        <div class="section">
            <h2>üìÅ Verifica√ß√£o de Pasta</h2>
            <div id="folderCheck">Verificando...</div>
        </div>

        <div class="section">
            <h2>üñºÔ∏è Teste de Imagens Individuais</h2>
            <div class="image-test" id="imageTest">
                <!-- Imagens ser√£o inseridas aqui -->
            </div>
        </div>

        <div class="section">
            <h2>üîç Simula√ß√£o do Marketing Arsenal</h2>
            <p>Testando como as imagens apareceriam na se√ß√£o "Build your marketing arsenal":</p>
            <div id="arsenalSimulation" style="
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
                padding: 20px;
                background: rgba(0, 0, 0, 0.5);
                border-radius: 12px;
                margin: 20px 0;
            ">
                <!-- Arsenal simulation -->
            </div>
        </div>

        <div class="section">
            <h2>üìã Log de Debug</h2>
            <div class="log" id="debugLog"></div>
        </div>
    </div>

    <script>
        const debugLog = document.getElementById('debugLog');
        const folderCheck = document.getElementById('folderCheck');
        const imageTest = document.getElementById('imageTest');
        const arsenalSimulation = document.getElementById('arsenalSimulation');

        // Fun√ß√£o para adicionar log
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}\n`;
            debugLog.innerHTML += `<span class="${type}">${logEntry}</span>`;
            debugLog.scrollTop = debugLog.scrollHeight;
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        // Lista das imagens
        const images = [
            { name: 'ADsPaidTraffic.png', label: 'Ads & Paid Traffic' },
            { name: 'Communitybuilding.png', label: 'Community Building' },
            { name: 'design.png', label: 'Design' },
            { name: 'growthhacking.png', label: 'Growth Hacking' },
            { name: 'guerrillamarketing.png', label: 'Guerrilla Marketing' },
            { name: 'influencemarketing.png', label: 'Influence Marketing' },
            { name: 'listings.png', label: 'Listings' },
            { name: 'PRandcrossmarketing.png', label: 'PR & Cross Marketing' }
        ];

        addLog('üöÄ Iniciando debug do Marketing Arsenal...', 'info');

        // 1. Verificar se a pasta existe
        addLog('üìÅ Verificando pasta image-ring...', 'info');
        fetch('/image-ring/')
            .then(response => {
                if (response.ok) {
                    addLog('‚úÖ Pasta image-ring acess√≠vel', 'success');
                    folderCheck.innerHTML = '<span class="success">‚úÖ Pasta image-ring encontrada e acess√≠vel</span>';
                } else {
                    addLog(`‚ùå Erro ao acessar pasta: ${response.status}`, 'error');
                    folderCheck.innerHTML = `<span class="error">‚ùå Erro ${response.status} ao acessar pasta</span>`;
                }
            })
            .catch(error => {
                addLog(`‚ùå Erro de rede ao acessar pasta: ${error.message}`, 'error');
                folderCheck.innerHTML = `<span class="error">‚ùå Erro de rede: ${error.message}</span>`;
            });

        // 2. Testar cada imagem individualmente
        addLog('üñºÔ∏è Testando carregamento individual das imagens...', 'info');
        
        images.forEach((imageInfo, index) => {
            const imagePath = `/image-ring/${imageInfo.name}`;
            
            // Criar elemento de teste
            const imageItem = document.createElement('div');
            imageItem.className = 'image-item';
            
            const img = document.createElement('img');
            const label = document.createElement('div');
            const status = document.createElement('div');
            
            label.textContent = imageInfo.label;
            status.textContent = 'Carregando...';
            status.style.fontSize = '10px';
            
            img.onload = function() {
                addLog(`‚úÖ ${imageInfo.name} carregada com sucesso`, 'success');
                status.textContent = '‚úÖ OK';
                status.className = 'success';
                
                // Adicionar √† simula√ß√£o do arsenal
                createArsenalItem(imageInfo, imagePath);
            };
            
            img.onerror = function() {
                addLog(`‚ùå Erro ao carregar ${imageInfo.name}`, 'error');
                status.textContent = '‚ùå Erro';
                status.className = 'error';
                
                // Tentar caminhos alternativos
                tryAlternativePaths(imageInfo);
            };
            
            img.src = imagePath;
            img.alt = imageInfo.label;
            
            imageItem.appendChild(img);
            imageItem.appendChild(label);
            imageItem.appendChild(status);
            imageTest.appendChild(imageItem);
        });

        // 3. Fun√ß√£o para criar item do arsenal
        function createArsenalItem(imageInfo, imagePath) {
            const arsenalItem = document.createElement('div');
            arsenalItem.style.cssText = `
                position: relative;
                background: rgba(0, 0, 0, 0.8);
                border: 1px solid rgba(16, 185, 129, 0.3);
                border-radius: 12px;
                padding: 15px;
                text-align: center;
                transition: transform 0.3s ease;
                cursor: pointer;
            `;
            
            arsenalItem.onmouseenter = function() {
                this.style.transform = 'scale(1.05)';
                this.style.borderColor = '#10b981';
            };
            
            arsenalItem.onmouseleave = function() {
                this.style.transform = 'scale(1)';
                this.style.borderColor = 'rgba(16, 185, 129, 0.3)';
            };
            
            const img = document.createElement('img');
            img.src = imagePath;
            img.alt = imageInfo.label;
            img.style.cssText = `
                width: 80px;
                height: 80px;
                object-fit: cover;
                border-radius: 8px;
                margin-bottom: 10px;
            `;
            
            const label = document.createElement('div');
            label.textContent = imageInfo.label;
            label.style.cssText = `
                font-size: 12px;
                font-weight: bold;
                color: #10b981;
            `;
            
            arsenalItem.appendChild(img);
            arsenalItem.appendChild(label);
            arsenalSimulation.appendChild(arsenalItem);
        }

        // 4. Tentar caminhos alternativos
        function tryAlternativePaths(imageInfo) {
            const alternatives = [
                `/image ring/${imageInfo.name}`, // Pasta com espa√ßo (caso ainda exista)
                `./image-ring/${imageInfo.name}`, // Caminho relativo
                `image-ring/${imageInfo.name}`, // Sem barra inicial
            ];
            
            addLog(`üîç Tentando caminhos alternativos para ${imageInfo.name}...`, 'warning');
            
            alternatives.forEach((altPath, index) => {
                const testImg = new Image();
                testImg.onload = function() {
                    addLog(`‚úÖ Encontrada em caminho alternativo: ${altPath}`, 'success');
                };
                testImg.onerror = function() {
                    addLog(`‚ùå N√£o encontrada em: ${altPath}`, 'error');
                };
                testImg.src = altPath;
            });
        }

        // 5. Verificar se h√° problemas de CORS ou cache
        addLog('üîç Verificando poss√≠veis problemas...', 'info');
        
        // Verificar cache do Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(registrations => {
                if (registrations.length > 0) {
                    addLog(`üîß Service Worker ativo encontrado (${registrations.length} registrations)`, 'info');
                    addLog('üí° Dica: Limpe o cache se as imagens n√£o carregarem', 'warning');
                } else {
                    addLog('‚ÑπÔ∏è Nenhum Service Worker ativo', 'info');
                }
            });
        }

        // Verificar se estamos em localhost ou file://
        const protocol = window.location.protocol;
        const hostname = window.location.hostname;
        addLog(`üåê Protocolo: ${protocol}, Host: ${hostname || 'file system'}`, 'info');
        
        if (protocol === 'file:') {
            addLog('‚ö†Ô∏è Executando via file://, algumas funcionalidades podem n√£o funcionar', 'warning');
            addLog('üí° Recomendado: usar um servidor local (http://)', 'warning');
        }

        addLog('‚úÖ Debug iniciado. Aguarde os resultados...', 'success');
    </script>
</body>
</html>
